<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attack Calculator - RESOURCES GPS MMO Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-cogs mr-2"></i>RESOURCES GPS MMO Game
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="baseDropdown" data-toggle="dropdown">
                            <i class="fas fa-building mr-1"></i>Base
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="headquarters.html"><i class="fas fa-home mr-2"></i>Headquarters</a>
                            <a class="dropdown-item" href="factories.html"><i class="fas fa-industry mr-2"></i>Factories</a>
                            <a class="dropdown-item" href="special-buildings.html"><i class="fas fa-landmark mr-2"></i>Special Buildings</a>
                            <a class="dropdown-item" href="resources.html"><i class="fas fa-gem mr-2"></i>Resources</a>
                            <a class="dropdown-item" href="products.html"><i class="fas fa-cube mr-2"></i>Products</a>
                            <a class="dropdown-item" href="loot.html"><i class="fas fa-treasure-chest mr-2"></i>Loot</a>
                            <a class="dropdown-item" href="units.html"><i class="fas fa-users mr-2"></i>Units</a>
                            <a class="dropdown-item" href="luxury-goods.html"><i class="fas fa-crown mr-2"></i>Luxury Goods</a>
                            <a class="dropdown-item" href="prices.html"><i class="fas fa-chart-line mr-2"></i>Prices</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" data-toggle="dropdown">
                            <i class="fas fa-tools mr-1"></i>Tools
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="production-calculation.html"><i class="fas fa-calculator mr-2"></i>Production Calculation</a>
                            <a class="dropdown-item" href="factory-improvement.html"><i class="fas fa-arrow-trend-up mr-2"></i>Factory Improvement</a>
                            <a class="dropdown-item" href="mine-improvements.html"><i class="fas fa-mountain mr-2"></i>Mine Improvements</a>
                            <a class="dropdown-item" href="recycling.html"><i class="fas fa-recycle mr-2"></i>Recycling</a>
                            <a class="dropdown-item" href="mines-cost.html"><i class="fas fa-money-bill-wave mr-2"></i>Mines Cost</a>
                            <a class="dropdown-item" href="yield-of-the-mines.html"><i class="fas fa-chart-bar mr-2"></i>Yield of Mines</a>
                            <a class="dropdown-item active" href="attack-calculator.html"><i class="fas fa-sword mr-2"></i>Attack Calculator</a>
                            <a class="dropdown-item" href="calculation-of-warehouse.html"><i class="fas fa-warehouse mr-2"></i>Warehouse Calculator</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="container mt-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="production-calculation.html">Tools</a></li>
                <li class="breadcrumb-item active">Attack Calculator</li>
            </ol>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="container my-4">
        <div class="row">
            <div class="col-12">
                <div class="d-flex align-items-center mb-4">
                    <i class="fas fa-sword text-danger mr-4" style="font-size: 4rem;"></i>
                    <div>
                        <h1 class="mb-0">Attack Calculator</h1>
                        <p class="text-muted mb-0">Calculate attack power, defense, and combat outcomes for strategic planning</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculator Interface -->
        <div class="row">
            <!-- Attacker Panel -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0"><i class="fas fa-swords mr-2"></i>Attacker Configuration</h5>
                    </div>
                    <div class="card-body">
                        <form id="attackerForm">
                            <!-- Attacker Units -->
                            <div class="form-group">
                                <label for="attackerUnits"><i class="fas fa-users mr-2"></i>Unit Types</label>
                                <select class="form-control" id="attackerUnits">
                                    <option value="">Select Primary Unit</option>
                                    <option value="security-staff">Security Staff</option>
                                    <option value="watch-dogs">Watch Dogs</option>
                                    <option value="attack-dogs">Attack Dogs</option>
                                    <option value="gangster">Gangster</option>
                                    <option value="elite-force">Elite Force</option>
                                    <option value="private-army">Private Army</option>
                                </select>
                            </div>

                            <!-- Unit Count -->
                            <div class="form-group">
                                <label for="attackerCount"><i class="fas fa-list-ol mr-2"></i>Number of Units</label>
                                <input type="number" class="form-control" id="attackerCount" value="50" min="1" max="500">
                            </div>

                            <!-- Attacker Equipment -->
                            <div class="form-group">
                                <label><i class="fas fa-tools mr-2"></i>Equipment & Bonuses</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="attackerWeapons">
                                    <label class="form-check-label" for="attackerWeapons">Advanced Weapons (+40% attack)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="attackerArmor">
                                    <label class="form-check-label" for="attackerArmor">Combat Armor (+25% defense)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="attackerTactics">
                                    <label class="form-check-label" for="attackerTactics">Tactical Training (+30% effectiveness)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="attackerBackup">
                                    <label class="form-check-label" for="attackerBackup">Reinforcement Backup (+50% capacity)</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Defender Panel -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="fas fa-shield-alt mr-2"></i>Defender Configuration</h5>
                    </div>
                    <div class="card-body">
                        <form id="defenderForm">
                            <!-- Defender Units -->
                            <div class="form-group">
                                <label for="defenderUnits"><i class="fas fa-users mr-2"></i>Unit Types</label>
                                <select class="form-control" id="defenderUnits">
                                    <option value="">Select Primary Unit</option>
                                    <option value="security-staff">Security Staff</option>
                                    <option value="watch-dogs">Watch Dogs</option>
                                    <option value="attack-dogs">Attack Dogs</option>
                                    <option value="gangster">Gangster</option>
                                    <option value="elite-force">Elite Force</option>
                                    <option value="private-army">Private Army</option>
                                </select>
                            </div>

                            <!-- Unit Count -->
                            <div class="form-group">
                                <label for="defenderCount"><i class="fas fa-list-ol mr-2"></i>Number of Units</label>
                                <input type="number" class="form-control" id="defenderCount" value="30" min="1" max="500">
                            </div>

                            <!-- Defender Equipment -->
                            <div class="form-group">
                                <label><i class="fas fa-tools mr-2"></i>Equipment & Bonuses</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="defenderWeapons">
                                    <label class="form-check-label" for="defenderWeapons">Defensive Weapons (+35% defense)</label>
                                </div>
                                <div class="form-check-input" type="checkbox" id="defenderFortifications">
                                    <label class="form-check-label" for="defenderFortifications">Base Fortifications (+50% defense)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="defenderTraining">
                                    <label class="form-check-label" for="defenderTraining">Security Training (+25% effectiveness)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="defenderSupport">
                                    <label class="form-check-label" for="defenderSupport">Emergency Response (+40% capacity)</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculate Button -->
        <div class="row mt-3">
            <div class="col-12">
                <button type="button" class="btn btn-warning btn-lg btn-block" onclick="calculateCombat()">
                    <i class="fas fa-sword mr-2"></i>Calculate Combat Outcome
                </button>
            </div>
        </div>

        <!-- Results Panel -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-chart-area mr-2"></i>Combat Analysis</h5>
                    </div>
                    <div class="card-body">
                        <div id="combatResults" style="display: none;">
                            <div class="row">
                                <!-- Attacker Stats -->
                                <div class="col-md-6">
                                    <div class="card bg-danger text-white">
                                        <div class="card-header">
                                            <h6><i class="fas fa-swords mr-2"></i>Attacker Power</h6>
                                        </div>
                                        <div class="card-body">
                                            <table class="table table-dark table-sm">
                                                <tr>
                                                    <td><strong>Attack Power:</strong></td>
                                                    <td id="attackerPower" class="text-right">-</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Defense:</strong></td>
                                                    <td id="attackerDefense" class="text-right">-</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Total Strength:</strong></td>
                                                    <td id="attackerStrength" class="text-right">-</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Defender Stats -->
                                <div class="col-md-6">
                                    <div class="card bg-primary text-white">
                                        <div class="card-header">
                                            <h6><i class="fas fa-shield-alt mr-2"></i>Defender Power</h6>
                                        </div>
                                        <div class="card-body">
                                            <table class="table table-dark table-sm">
                                                <tr>
                                                    <td><strong>Attack Power:</strong></td>
                                                    <td id="defenderPower" class="text-right">-</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Defense:</strong></td>
                                                    <td id="defenderDefense" class="text-right">-</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Total Strength:</strong></td>
                                                    <td id="defenderStrength" class="text-right">-</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Combat Outcome -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <div id="combatOutcome" class="alert">
                                        <h6><i class="fas fa-chart-line mr-2"></i>Combat Prediction</h6>
                                        <div id="combatOutcomeText">-</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Results -->
                            <div class="row">
                                <div class="col-12">
                                    <h6><i class="fas fa-percentage mr-2"></i>Combat Metrics</h6>
                                    <table class="table table-sm">
                                        <tr>
                                            <td><strong>Victory Probability:</strong></td>
                                            <td id="victoryProbability" class="text-right">-</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Estimated Casualties:</strong></td>
                                            <td id="estimatedCasualties" class="text-right">-</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Combat Duration:</strong></td>
                                            <td id="combatDuration" class="text-right">-</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Resource Risk:</strong></td>
                                            <td id="resourceRisk" class="text-right">-</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div id="combatInitialMessage">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-sword fa-3x mb-3"></i>
                                <h5>Combat Analysis Ready</h5>
                                <p>Configure attacker and defender units to calculate potential combat outcomes and strategic advantages.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Combat Strategy Guide -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-lightbulb mr-2"></i>Combat Strategy Guide</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h6><i class="fas fa-swords mr-2"></i>Attack Strategies</h6>
                                <ul>
                                    <li><strong>Overwhelming Force:</strong> Superior numbers</li>
                                    <li><strong>Precision Strike:</strong> Elite units</li>
                                    <li><strong>Adaptive Tactics:</strong> Flexible approach</li>
                                    <li><strong>Resource Focus:</strong> Target key assets</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fas fa-shield-alt mr-2"></i>Defense Strategies</h6>
                                <ul>
                                    <li><strong>Fortified Position:</strong> Strong base defense</li>
                                    <li><strong>Mobile Defense:</strong> Flexible response</li>
                                    <li><strong>Early Warning:</strong> Detect threats</li>
                                    <li><strong>Retreat Protocol:</strong> Minimize losses</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fas fa-trophy mr-2"></i>Unit Effectiveness</h6>
                                <ul>
                                    <li><strong>Elite Force:</strong> Highest combat power</li>
                                    <li><strong>Private Army:</strong> Organizational advantage</li>
                                    <li><strong>Attack Dogs:</strong> High damage output</li>
                                    <li><strong>Security Staff:</strong> Reliable defense</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Unit Combat Stats -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-table mr-2"></i>Unit Combat Statistics</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Unit Type</th>
                                        <th>Attack Power</th>
                                        <th>Defense</th>
                                        <th>Speed</th>
                                        <th>Effectiveness</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><i class="fas fa-medal text-warning mr-2"></i>Elite Force</td>
                                        <td>150</td>
                                        <td>140</td>
                                        <td>High</td>
                                        <td><span class="badge badge-warning">Maximum</span></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-flag text-primary mr-2"></i>Private Army</td>
                                        <td>120</td>
                                        <td>110</td>
                                        <td>Very High</td>
                                        <td><span class="badge badge-success">Excellent</span></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-skull text-dark mr-2"></i>Gangster</td>
                                        <td>100</td>
                                        <td>85</td>
                                        <td>High</td>
                                        <td><span class="badge badge-success">Very High</span></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-fire text-danger mr-2"></i>Attack Dogs</td>
                                        <td>90</td>
                                        <td>60</td>
                                        <td>Maximum</td>
                                        <td><span class="badge badge-info">High</span></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-dog text-success mr-2"></i>Watch Dogs</td>
                                        <td>50</td>
                                        <td>40</td>
                                        <td>Very High</td>
                                        <td><span class="badge badge-info">Support</span></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-shield-alt text-primary mr-2"></i>Security Staff</td>
                                        <td>60</td>
                                        <td>80</td>
                                        <td>Medium</td>
                                        <td><span class="badge badge-secondary">Reliable</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Combat Scenarios -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-chess mr-2"></i>Recommended Combat Scenarios</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card scenario-card">
                                    <div class="card-header bg-success text-white">
                                        <h6><i class="fas fa-trophy mr-2"></i>Victory Scenario</h6>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Recommended Actions:</strong></p>
                                        <ul>
                                            <li>Superior force ratio (2:1 minimum)</li>
                                            <li>Advanced equipment bonuses</li>
                                            <li>Elite unit deployment</li>
                                            <li>Coordinated timing</li>
                                        </ul>
                                        <p><strong>Success Rate:</strong> 85%+</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card scenario-card">
                                    <div class="card-header bg-warning text-white">
                                        <h6><i class="fas fa-balance-scale mr-2"></i>Balanced Scenario</h6>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Recommended Actions:</strong></p>
                                        <ul>
                                            <li>Equal force deployment</li>
                                            <li>Tactical positioning</li>
                                            <li>Flexible response plan</li>
                                            <li>Resource preservation</li>
                                        </ul>
                                        <p><strong>Success Rate:</strong> 60-70%</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card scenario-card">
                                    <div class="card-header bg-danger text-white">
                                        <h6><i class="fas fa-exclamation-triangle mr-2"></i>High Risk Scenario</h6>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Recommended Actions:</strong></p>
                                        <ul>
                                            <li>Inferior force ratio</li>
                                            <li>Defensive positioning</li>
                                            <li>Retreat options prepared</li>
                                            <li>Minimal resource exposure</li>
                                        </ul>
                                        <p><strong>Success Rate:</strong> <35%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>RESOURCES GPS MMO Game Reference</h5>
                    <p class="mb-0">Complete game reference and calculator suite</p>
                </div>
                <div class="col-md-6 text-md-right">
                    <p class="mb-0">
                        <a href="index.html" class="text-light">Back to Home</a> | 
                        <a href="yield-of-the-mines.html" class="text-light ml-2">Previous: Yield of Mines</a> | 
                        <a href="calculation-of-warehouse.html" class="text-light ml-2">Next: Warehouse Calculator</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="env.js"></script>
    <script src="supabase-integration.js"></script>
    <script src="helper.js"></script>
    <script>
        // Unit combat data
        const unitCombatData = {
            'security-staff': { attack: 60, defense: 80, baseStrength: 70 },
            'watch-dogs': { attack: 50, defense: 40, baseStrength: 45 },
            'attack-dogs': { attack: 90, defense: 60, baseStrength: 75 },
            'gangster': { attack: 100, defense: 85, baseStrength: 92 },
            'elite-force': { attack: 150, defense: 140, baseStrength: 145 },
            'private-army': { attack: 120, defense: 110, baseStrength: 115 }
        };

        function calculateCombat() {
            const attackerUnits = document.getElementById('attackerUnits').value;
            const defenderUnits = document.getElementById('defenderUnits').value;
            const attackerCount = parseInt(document.getElementById('attackerCount').value);
            const defenderCount = parseInt(document.getElementById('defenderCount').value);

            if (!attackerUnits || !defenderUnits || !unitCombatData[attackerUnits] || !unitCombatData[defenderUnits]) {
                alert('Please select valid unit types for both attacker and defender');
                return;
            }

            const attackerData = unitCombatData[attackerUnits];
            const defenderData = unitCombatData[defenderUnits];
            
            // Calculate attacker power
            let attackerPower = attackerData.attack * attackerCount;
            let attackerDefense = attackerData.defense * attackerCount;
            
            // Apply attacker bonuses
            if (document.getElementById('attackerWeapons').checked) attackerPower *= 1.40;
            if (document.getElementById('attackerArmor').checked) attackerDefense *= 1.25;
            if (document.getElementById('attackerTactics').checked) attackerPower *= 1.30;
            if (document.getElementById('attackerBackup').checked) attackerCount *= 1.50;
            
            const attackerStrength = (attackerPower + attackerDefense) * attackerCount / attackerCount;
            
            // Calculate defender power
            let defenderPower = defenderData.attack * defenderCount;
            let defenderDefense = defenderData.defense * defenderCount;
            
            // Apply defender bonuses
            if (document.getElementById('defenderWeapons').checked) defenderPower *= 1.35;
            if (document.getElementById('defenderFortifications').checked) defenderDefense *= 1.50;
            if (document.getElementById('defenderTraining').checked) defenderPower *= 1.25;
            if (document.getElementById('defenderSupport').checked) defenderCount *= 1.40;
            
            const defenderStrength = (defenderPower + defenderDefense) * defenderCount / defenderCount;
            
            // Calculate outcome
            const attackerTotal = attackerPower * attackerCount;
            const defenderTotal = defenderDefense * defenderCount;
            const totalCombatPower = attackerTotal + defenderTotal;
            
            const attackerWinProbability = (attackerTotal / totalCombatPower) * 100;
            const victoryMargin = Math.abs(attackerTotal - defenderTotal) / totalCombatPower * 100;
            
            const estimatedCasualties = Math.max(attackerCount, defenderCount) * (victoryMargin / 100) * 0.3;
            const combatDuration = Math.max(1, Math.log10(Math.max(attackerCount, defenderCount)) * 2);
            const resourceRisk = victoryMargin < 20 ? 'High' : victoryMargin < 40 ? 'Medium' : 'Low';
            
            // Determine outcome
            let outcome = '';
            let outcomeClass = '';
            let outcomeText = '';
            
            if (attackerWinProbability >= 70) {
                outcome = 'Attacker Victory';
                outcomeClass = 'alert-success';
                outcomeText = 'The attacker has a strong advantage and is likely to win this engagement.';
            } else if (attackerWinProbability >= 55) {
                outcome = 'Favorable to Attacker';
                outcomeClass = 'alert-info';
                outcomeText = 'The attacker has a moderate advantage but victory is not certain.';
            } else if (attackerWinProbability >= 45) {
                outcome = 'Balanced Combat';
                outcomeClass = 'alert-warning';
                outcomeText = 'This is a closely matched engagement with unpredictable outcomes.';
            } else if (attackerWinProbability >= 30) {
                outcome = 'Favorable to Defender';
                outcomeClass = 'alert-info';
                outcomeText = 'The defender has a moderate advantage but victory is not certain.';
            } else {
                outcome = 'Defender Victory';
                outcomeClass = 'alert-danger';
                outcomeText = 'The defender has a strong advantage and is likely to win this engagement.';
            }

            // Update display
            document.getElementById('attackerPower').textContent = `${attackerTotal.toLocaleString()}`;
            document.getElementById('attackerDefense').textContent = `${attackerDefense.toLocaleString()}`;
            document.getElementById('attackerStrength').textContent = `${attackerStrength.toFixed(0)}`;
            document.getElementById('defenderPower').textContent = `${defenderTotal.toLocaleString()}`;
            document.getElementById('defenderDefense').textContent = `${defenderDefense.toLocaleString()}`;
            document.getElementById('defenderStrength').textContent = `${defenderStrength.toFixed(0)}`;
            
            document.getElementById('victoryProbability').textContent = `${attackerWinProbability.toFixed(1)}%`;
            document.getElementById('estimatedCasualties').textContent = `${estimatedCasualties.toFixed(0)} units`;
            document.getElementById('combatDuration').textContent = `${combatDuration.toFixed(1)} minutes`;
            document.getElementById('resourceRisk').textContent = resourceRisk;
            
            const outcomeHtml = `
                <h6><i class="fas fa-trophy mr-2"></i>${outcome}</h6>
                <p>${outcomeText}</p>
                <p><strong>Victory Margin:</strong> ${victoryMargin.toFixed(1)}%</p>
            `;
            
            const outcomeElement = document.getElementById('combatOutcome');
            outcomeElement.className = `alert ${outcomeClass}`;
            outcomeElement.innerHTML = outcomeHtml;
            document.getElementById('combatOutcomeText').innerHTML = outcomeHtml;

            document.getElementById('combatInitialMessage').style.display = 'none';
            document.getElementById('combatResults').style.display = 'block';
        }
    </script>
</body>
</html>